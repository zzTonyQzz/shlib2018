/*! vue-cli-xiaxs */
webpackJsonp([5],{

/***/ "+Xlz":
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__("FZ+f")(false);
// imports


// module
exports.push([module.i, ".chousebtn[data-v-2c1bf6fe]{display:inline-block;font-size:22px;padding-right:16px}@media only screen and (max-width:767px){.chousebtn[data-v-2c1bf6fe]{font-size:14px}}.chousebtn .radio-btn[data-v-2c1bf6fe]{position:absolute;cursor:pointer;width:23px;height:23px;background:#fff;border-radius:50%;border:1px solid #e9e9e9;margin-right:8px;margin-left:6px}.chousebtn .iconfont[data-v-2c1bf6fe]{position:absolute;width:23px;height:23px;line-height:23px}.chousebtn input[data-v-2c1bf6fe]{display:none}.chousebtn b[data-v-2c1bf6fe]{padding-left:40px;font-weight:400}@media only screen and (max-width:767px){.head-title[data-v-2c1bf6fe]{position:fixed;left:0;width:100%;z-index:8;background-color:#fff}}.title .titleedit[data-v-2c1bf6fe],.title .titlehead[data-v-2c1bf6fe]{float:left}.title .titlehead[data-v-2c1bf6fe]{height:60px}@media only screen and (max-width:767px){.title .titlehead[data-v-2c1bf6fe]{height:50px}}.title .titleedit .radio-btn[data-v-2c1bf6fe]{top:19px}@media only screen and (max-width:767px){.title .titleedit .radio-btn[data-v-2c1bf6fe]{top:14px}}.title .titleedit .chouse[data-v-2c1bf6fe]{display:inline-block;position:relative;margin-left:16px}.title .titleedit .chouse[data-v-2c1bf6fe]:before{content:\"\";position:absolute;top:18px;left:-16px;height:24px;width:1px;background-color:#979797}@media only screen and (max-width:767px){.title .titleedit .chouse[data-v-2c1bf6fe]:before{height:16px}}.title .titleedit .chouse span[data-v-2c1bf6fe]{padding:0 10px;color:#5c7bc8}.title[data-v-2c1bf6fe]{position:relative;height:60px;line-height:60px;border-bottom:1px solid #eee;font-size:20px}.title .iconfont[data-v-2c1bf6fe]{font-size:22px;color:#5c7bc8}.title .bookedit[data-v-2c1bf6fe]{cursor:pointer;float:right;font-size:18px;padding-right:20px;height:60px}.title .bookedit .iconfont[data-v-2c1bf6fe]{font-size:18px}.title .bookedit span[data-v-2c1bf6fe]{color:#333}.title .bookdelete[data-v-2c1bf6fe]{float:right;padding-right:20px}@media only screen and (max-width:767px){.title .bookdelete[data-v-2c1bf6fe]{padding-right:0}}.title .bookdelete .cancel[data-v-2c1bf6fe],.title .bookdelete .delete[data-v-2c1bf6fe]{cursor:pointer;float:left}.title .bookdelete .cancel[data-v-2c1bf6fe]{margin-left:24px}@media only screen and (max-width:767px){.title .bookdelete .cancel[data-v-2c1bf6fe]{margin-left:12px}}.title .bookdelete .iconfont[data-v-2c1bf6fe]{font-size:18px}@media only screen and (max-width:767px){.title .bookdelete .iconfont[data-v-2c1bf6fe]{font-size:14px}}@media only screen and (max-width:767px){.title[data-v-2c1bf6fe]{height:50px;line-height:50px;font-size:15px;padding:0 15px}.title .iconfont[data-v-2c1bf6fe]{font-size:16px}.title .bookedit[data-v-2c1bf6fe]{font-size:13px;padding-right:0;height:50px}.title .bookedit .iconfont[data-v-2c1bf6fe]{font-size:13px;float:left}.title .bookedit span[data-v-2c1bf6fe]{color:#333}}.bookchouse[data-v-2c1bf6fe]{padding-left:15px;font-size:14px;color:#999;margin-top:14px}.bookchouse span[data-v-2c1bf6fe]{padding:0 10px;color:#5c7bc8}@media only screen and (max-width:767px){.books[data-v-2c1bf6fe]{padding-top:130px}}.mybooks[data-v-2c1bf6fe],.publication[data-v-2c1bf6fe]{margin-top:20px;padding-left:0}.mybooks ul[data-v-2c1bf6fe],.publication ul[data-v-2c1bf6fe]{padding-left:0;margin-left:-16px;margin-right:-16px}.mybooks ul li[data-v-2c1bf6fe],.publication ul li[data-v-2c1bf6fe]{list-style:none;float:left}.mybooks ul li a[data-v-2c1bf6fe],.publication ul li a[data-v-2c1bf6fe]{text-decoration:none}@media only screen and (max-width:767px){.mybooks ul[data-v-2c1bf6fe],.publication ul[data-v-2c1bf6fe]{margin-left:0;margin-right:0}}.mybooks .book[data-v-2c1bf6fe],.publication .book[data-v-2c1bf6fe]{position:relative;list-style:none;float:left;width:20%;margin-top:20px;margin-bottom:20px;padding:0 16px}@media only screen and (max-width:767px){.mybooks .book[data-v-2c1bf6fe],.publication .book[data-v-2c1bf6fe]{width:33.333333%;margin-top:12px;margin-bottom:12px}}.mybooks .book .chousebtn[data-v-2c1bf6fe],.publication .book .chousebtn[data-v-2c1bf6fe]{display:block}.mybooks .book .radio-btn[data-v-2c1bf6fe],.publication .book .radio-btn[data-v-2c1bf6fe]{top:-12px;right:-4px;width:26px;height:26px;background:#f5f6f7}.mybooks .book .radio-btn .iconfont[data-v-2c1bf6fe],.publication .book .radio-btn .iconfont[data-v-2c1bf6fe]{position:absolute;width:26px;height:26px;color:#5c7bc8;font-size:26px;left:-2px;top:1px}@media only screen and (max-width:767px){.mybooks[data-v-2c1bf6fe],.publication[data-v-2c1bf6fe]{margin-top:0;margin-left:-15px;margin-right:-15px;height:calc(100vh - 200px);overflow:scroll}}.delete-container[data-v-2c1bf6fe]{position:fixed;top:0;right:0;bottom:0;left:0;z-index:9999;background-color:rgba(0,0,0,.3)}.delete-modal[data-v-2c1bf6fe]{position:absolute;top:50%;left:50%;color:#333;text-align:center;background-color:#fff;overflow:hidden}.delete-modal>.action-btn[data-v-2c1bf6fe]{border-top:1px solid #d9d9d9}.delete-modal>.action-btn>button[data-v-2c1bf6fe]{width:50%;color:#959ca5}.delete-modal>.action-btn .delete[data-v-2c1bf6fe]{border-left:1px solid #d9d9d9;color:#4877ae}@media only screen and (min-width:768px){.delete-modal[data-v-2c1bf6fe]{width:360px;height:160px;margin-top:-80px;margin-left:-180px;border-radius:8px;font-size:18px}.delete-modal>.modal-content[data-v-2c1bf6fe]{padding-top:20px;height:109px;line-height:40px}.delete-modal>.action-btn>button[data-v-2c1bf6fe]{line-height:49px;font-size:18px}}@media only screen and (max-width:767px){.delete-modal[data-v-2c1bf6fe]{width:85%;max-width:319px;transform:translate3d(-50%,-50%,0);font-size:15px;line-height:24px;border-radius:4px}.delete-modal>.modal-content[data-v-2c1bf6fe]{padding-top:30px;padding-bottom:18px}.delete-modal>.action-btn>button[data-v-2c1bf6fe]{line-height:44px;font-size:16px}}.paging[data-v-2c1bf6fe]{margin-top:60px}@media only screen and (max-width:767px){.paging[data-v-2c1bf6fe]{display:none}}", ""]);

// exports


/***/ }),

/***/ "52/O":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
Object.defineProperty(__webpack_exports__, "__esModule", { value: true });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_myBookshelf_vue__ = __webpack_require__("QN0X");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_myBookshelf_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_myBookshelf_vue__);
/* harmony namespace reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_myBookshelf_vue__) if(__WEBPACK_IMPORT_KEY__ !== 'default') (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_myBookshelf_vue__[key]; }) }(__WEBPACK_IMPORT_KEY__));
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_2c1bf6fe_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_myBookshelf_vue__ = __webpack_require__("xCUj");
function injectStyle (ssrContext) {
  __webpack_require__("yd2Y")
}
var normalizeComponent = __webpack_require__("VU/8")
/* script */


/* template */

/* template functional */
var __vue_template_functional__ = false
/* styles */
var __vue_styles__ = injectStyle
/* scopeId */
var __vue_scopeId__ = "data-v-2c1bf6fe"
/* moduleIdentifier (server only) */
var __vue_module_identifier__ = null
var Component = normalizeComponent(
  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_myBookshelf_vue___default.a,
  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_2c1bf6fe_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_myBookshelf_vue__["a" /* default */],
  __vue_template_functional__,
  __vue_styles__,
  __vue_scopeId__,
  __vue_module_identifier__
)

/* harmony default export */ __webpack_exports__["default"] = (Component.exports);


/***/ }),

/***/ "FUI0":
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__("FZ+f")(false);
// imports


// module
exports.push([module.i, ".tabs[data-v-7443f42a]{text-align:center;height:66px;border-bottom:1px solid #eee}@media only screen and (max-width:767px){.tabs[data-v-7443f42a]{height:38px}}.tabs ul[data-v-7443f42a]{display:inline-block;width:750px;height:100%;padding-left:0}@media only screen and (max-width:767px){.tabs ul[data-v-7443f42a]{width:100%;height:100%}}.tabs ul li[data-v-7443f42a]{position:relative;list-style:none;box-sizing:border-box;float:left;height:100%;line-height:22px;padding:0 20px}.tabs ul li+li[data-v-7443f42a]:before{content:\"\";position:absolute;top:50%;left:0;width:2px;height:20px;margin-top:-10px;background-color:#999;opacity:.7}@media only screen and (max-width:767px){.tabs ul li+li[data-v-7443f42a]:before{height:14px;margin-top:-7px}}.tabs ul li span[data-v-7443f42a]{display:inline-block;height:100%;line-height:66px;font-size:18px;color:#999;cursor:pointer}@media only screen and (max-width:767px){.tabs ul li span[data-v-7443f42a]{font-size:14px;line-height:38px}}.tabs ul li .active[data-v-7443f42a],.tabs ul li span[data-v-7443f42a]:hover{color:#4474ac;border-bottom:2px solid #4474ac}", ""]);

// exports


/***/ }),

/***/ "QN0X":
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;(function (global, factory) {
  if (true) {
    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [module, exports, __webpack_require__("//Fk"), __webpack_require__("zkJ1"), __webpack_require__("NXlk"), __webpack_require__("4fwm"), __webpack_require__("JA8L")], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),
				__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?
				(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
  } else if (typeof exports !== "undefined") {
    factory(module, exports, require('babel-runtime/core-js/promise'), require('../components/titleTab'), require('../components/loadMore'), require('../components/simpleBook'), require('../server/api'));
  } else {
    var mod = {
      exports: {}
    };
    factory(mod, mod.exports, global.promise, global.titleTab, global.loadMore, global.simpleBook, global.api);
    global.myBookshelf = mod.exports;
  }
})(this, function (module, exports, _promise, _titleTab, _loadMore, _simpleBook, _api) {
  'use strict';

  Object.defineProperty(exports, "__esModule", {
    value: true
  });

  var _promise2 = _interopRequireDefault(_promise);

  var _titleTab2 = _interopRequireDefault(_titleTab);

  var _loadMore2 = _interopRequireDefault(_loadMore);

  var _simpleBook2 = _interopRequireDefault(_simpleBook);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : {
      default: obj
    };
  }

  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //

  var self = null; // 自定义变量存储实例this

  exports.default = {
    name: "myBookshelf",

    data: function data() {
      return {
        isMobile: this.$store.state.isMobile,
        tabs: [{ title: '图书' }, { title: '期刊' }],
        curtab: 0,
        book: { // 我的图书
          list: [], // 图书列表
          curr: 1, // 当前页面
          totalNumb: 0, // 总页面
          loading: true, // 手机端是否正在载入
          totalBooks: 0 // 图书本数
        },
        publication: { // 我的期刊
          list: [],
          curr: 1,
          totalNumb: 0,
          loading: true,
          totalMags: 0 // 图书本数
        },
        editing: {
          edit: false
        }, //编辑状态
        deleteing: false, // 正在删除
        showDelete: false, // 删除书架提示框
        all: false, // 全选状态
        tempList: [], // 选中对象id列表,待删除列表
        perPage: 10 // 每页显示
      };
    },
    created: function created() {
      self = this;
    },


    components: {
      titleTab: _titleTab2.default,
      loadMore: _loadMore2.default,
      simpleBook: _simpleBook2.default
    },

    computed: {},

    mounted: function mounted() {
      this.initMyBookShelf();
      this.initMyMagShelf();
    },


    methods: {
      initMyBookShelf: function initMyBookShelf() {
        var _this = this;

        this.getMyBookShelf(1).then(function (data) {
          _this.book.list = data;
        });
      },
      initMyMagShelf: function initMyMagShelf() {
        var _this2 = this;

        this.getMyMagShelf(1).then(function (data) {
          _this2.publication.list = data;
        });
      },
      loadMore: function loadMore(index) {
        var _this3 = this;

        // 手机端加载更多
        if (this.curtab === 0) {
          if (this.book.curr >= this.book.totalNumb) {
            // this.newsList = this.newsList.concat([]);
            return;
          } else {
            this.book.curr = index;
            this.getMyBookShelf(index).then(function (data) {
              _this3.book.list = _this3.book.list.concat(data);
            });
          }
        }
        if (this.curtab === 1) {
          if (this.publication.curr >= this.publication.totalNumb) {
            // this.newsList = this.newsList.concat([]);
            return;
          } else {
            this.publication.curr = index;
            this.getMyMagShelf(index).then(function (data) {
              _this3.publication.list = _this3.publication.list.concat(data);
            });
          }
        }
      },
      pageChange: function pageChange(index) {
        var _this4 = this;

        // pc换页
        window.scrollTo(0, 0);
        if (this.curtab === 0) {
          this.book.curr = index;
          this.getMyBookShelf(index).then(function (data) {
            _this4.book.list = data;
          });
        }
        if (this.curtab === 1) {
          this.publication.curr = index;
          this.getMyMagShelf(index).then(function (data) {
            _this4.publication.list = data;
          });
        }
      },
      getMyBookShelf: function getMyBookShelf(index) {
        var _this5 = this;

        // 获取我的图书书架，需要登录（uat）
        this.book.loading = true;
        return _api.bookInfoApi.getMyBookShelf(index, this.perPage).then(function (data) {
          var mybooks = data.result.datas;
          if (!mybooks.length) {
            _this5.tabs[0].title = "图书0";
            return _promise2.default.resolve([]);
          }
          _this5.tabs[0].title = "图书" + data.result.totalrows;
          _this5.book.totalNumb = Math.ceil(data.result.totalrows / _this5.perPage);
          _this5.book.loading = false;
          _this5.book.totalBooks = data.result.totalrows;
          return _promise2.default.resolve(_this5.bookDataHandel(mybooks));
        }).catch(function (error) {});
      },
      getMyMagShelf: function getMyMagShelf(index) {
        var _this6 = this;

        // 获取我的期刊书架，需要登录（uat）
        this.publication.loading = true;
        return _api.bookInfoApi.getMyMagShelf(index, this.perPage).then(function (data) {
          var mymags = data.result.datas;
          if (!mymags.length) {
            _this6.tabs[1].title = "期刊0";
            return _promise2.default.resolve([]);
          }
          _this6.tabs[1].title = "期刊" + data.result.totalrows;
          _this6.publication.totalNumb = Math.ceil(data.result.totalrows / _this6.perPage);
          _this6.publication.loading = false;
          _this6.publication.totalMags = data.result.totalrows;
          return _promise2.default.resolve(_this6.magDataHandel(mymags));
        }).catch(function (error) {});
      },
      removeFromMyBookShelf: function removeFromMyBookShelf(bids) {
        var _this7 = this;

        // 删除我的图书
        _api.bookInfoApi.removeBookShelf(bids).then(function (data) {
          if (data.result.code === 0) {
            // 被成功删除的id
            var delbookids = data.reqparms.bookid.split(',');
            _this7.tabs[0].title = "图书" + (_this7.book.totalBooks - delbookids.length);

            if (_this7.isMobile) {
              // 手机页面，循环删除
              for (var i = 0, l = _this7.book.list.length; i < l; i++) {
                if (delbookids.indexOf(_this7.book.list[i].id) >= 0) {
                  _this7.book.list.splice(i, 1);
                }
              }
              _this7.book.curr = Math.ceil(_this7.book.list.length / _this7.perPage);
              _this7.book.totalNumb = Math.ceil(data.result.totalrows - delbookids.length / _this7.perPage);
              return;
            }
            if (_this7.book.curr >= _this7.book.totalNumb) {
              // 如果是最后一页
              if (delbookids.length >= _this7.book.list.length) {
                // 如果最后一页被全部删除
                if (_this7.book.curr === 1) {
                  // 如果只有一页，清空这一页
                  _this7.book.list = [];
                } else {
                  // 获取前一页
                  _this7.pageChange(--_this7.book.curr);
                  _this7.$refs.bookpg.setPage(_this7.book.curr);
                }
              } else {
                // 如果最后一页没有被全部删除，逐个删除
                for (var _i = 0, _l = _this7.book.list.length; _i < _l; _i++) {
                  if (delbookids.indexOf(_this7.book.list[_i].id) >= 0) {
                    _this7.book.list.splice(_i, 1);
                    // return Promise.resolve('Done');
                  }
                }
              }
            } else {
              // 如果不是最后一页,重新获取当前页
              _this7.pageChange(_this7.book.curr);
            }
          }
          _this7.tempList.length = 0;
          _this7.deleteing = false;
          _this7.showDelete = false;
          _this7.editing.edit = false;
        }).catch(function (error) {});
      },
      removeFromMyMagShelf: function removeFromMyMagShelf(bids) {
        var _this8 = this;

        // 删除我的期刊
        this.publication.loading = true;
        return _api.bookInfoApi.removeMagShelf(bids).then(function (data) {
          if (data.result.code === 0) {
            var magids = data.reqparms.magid.split(','); // 被成功删除的id
            _this8.tabs[1].title = "期刊" + (_this8.publication.totalMagss - magids.length);
            if (_this8.isMobile) {
              // 手机页面，循环删除
              for (var i = 0, l = _this8.publication.list.length; i < l; i++) {
                if (magids.indexOf(_this8.publication.list[i].id) >= 0) {
                  _this8.publication.list.splice(i, 1);
                }
              }
              _this8.publication.curr = Math.ceil(_this8.publication.list.length / _this8.perPage);
              _this8.publication.totalNumb = Math.ceil(data.result.totalrows - magids.length / _this8.perPage);
              return;
            }
            if (_this8.publication.curr >= _this8.publication.totalNumb) {
              // 如果是最后一页
              if (magids.length >= _this8.publication.list.length) {
                // 如果最后一页被全部删除
                if (_this8.publication.curr === 1) {
                  // 如果只有一页，清空这一页
                  _this8.publication.list = [];
                } else {
                  // 获取前一页
                  _this8.pageChange(--_this8.publication.curr);
                  _this8.$refs.magpg.setPage(_this8.publication.curr);
                }
              } else {
                // 如果最后一页没有被全部删除，逐个删除
                for (var _i2 = 0, _l2 = _this8.publication.list.length; _i2 < _l2; _i2++) {
                  if (magids.indexOf(_this8.publication.list[_i2].id) >= 0) {
                    _this8.publication.list.splice(_i2, 1);
                    // return Promise.resolve('Done');
                  }
                }
              }
            } else {
              // 如果不是最后一页,重新获取当前页
              _this8.pageChange(_this8.publication.curr);
            }
          }
          _this8.tempList.length = 0;
          _this8.deleteing = false;
          _this8.showDelete = false;
          _this8.editing.edit = false;
        }).catch(function (error) {});
      },
      bookDataHandel: function bookDataHandel(data) {
        // 我的图书返回数据二次处理，以适合simplebook的格式
        var tempList = [];
        data.forEach(function (item) {
          tempList.push({
            id: item.v1,
            // fid: item.magid,
            cover: item.v8,
            title: item.v5,
            type: '',
            pace: item.v6 + '%'
          });
        });

        return tempList;
      },
      magDataHandel: function magDataHandel(data) {
        // 我的期刊返回数据二次处理，以适合simplebook的格式
        var tempList = [];
        data.forEach(function (item) {
          tempList.push({
            id: item.v2,
            // fid: item.magid,
            cover: item.v8,
            title: item.v6,
            type: '',
            pace: item.v5 + '%'
          });
        });

        return tempList;
      },
      changeTab: function changeTab(index) {
        if (this.editing.edit) {
          return;
        }
        this.curtab = index;
      },
      edit: function edit() {
        // 编辑按钮
        this.editing.edit = true;
      },
      deleteBook: function deleteBook() {
        // 编辑删除按钮
        if (!this.tempList.length) {
          return;
        }
        this.showDelete = true;
      },
      cancelEdit: function cancelEdit() {
        // 编辑取消按钮
        if (this.deleteing) {
          return;
        }
        this.editing.edit = false;
        this.book.list.map(function (item) {
          item.chouse = false;
        });
        this.tempList.length = 0;
      },
      cancelDelete: function cancelDelete() {
        // 弹窗取消删除按钮
        this.showDelete = false;
      },
      makeDelete: function makeDelete() {
        // 弹窗确认删除按钮
        if (this.deleteing) {
          return;
        }
        this.deleteing = true;
        if (this.curtab === 0) {
          this.removeFromMyBookShelf(this.tempList.join(','));
        }
        if (this.curtab === 1) {
          this.removeFromMyMagShelf(this.tempList.join(','));
        }
      },
      selectAll: function selectAll(done) {
        var _this9 = this;

        // 全选按钮
        this.all = !this.all;
        if (this.curtab === 0) {
          if (this.all) {
            this.tempList.length = 0;
            this.book.list.forEach(function (item) {
              item.chouse = true;
              _this9.tempList.push(item.id);
            });
          } else {
            this.book.list.forEach(function (item) {
              item.chouse = false;
            });
            this.tempList.length = 0;
          }
        } else if (this.curtab === 1) {
          if (this.all) {
            this.tempList.length = 0;
            this.publication.list.forEach(function (item) {
              item.chouse = true;
              _this9.tempList.push(item.id);
            });
          } else {
            this.publication.list.forEach(function (item) {
              item.chouse = false;
            });
            this.tempList.length = 0;
          }
        }
      },
      selectItem: function selectItem(book) {
        // 单选按钮
        // console.log('item');
        book.chouse = !book.chouse;
        if (book.chouse) {
          this.tempList.push(book.id);
          if (this.curtab === 0) {
            if (this.tempList.length === this.book.list.length) {
              this.all = true;
            }
          }
          if (this.curtab === 1) {
            if (this.tempList.length === this.publication.list.length) {
              this.all = true;
            }
          }
        } else {
          this.all = false;
          for (var i = 0, l = this.tempList.length; i < l; i++) {
            if (book.id === this.tempList[i]) {
              this.tempList.splice(i, 1);
            }
          }
        }
        console.log(this.tempList);
        this.tempList;
      }
    }
  };
  module.exports = exports['default'];
});

/***/ }),

/***/ "ZpZI":
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;(function (global, factory) {
    if (true) {
        !(__WEBPACK_AMD_DEFINE_ARRAY__ = [module, exports], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),
				__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?
				(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
    } else if (typeof exports !== "undefined") {
        factory(module, exports);
    } else {
        var mod = {
            exports: {}
        };
        factory(mod, mod.exports);
        global.titleTab = mod.exports;
    }
})(this, function (module, exports) {
    "use strict";

    Object.defineProperty(exports, "__esModule", {
        value: true
    });
    exports.default = {
        name: "titleTab",
        data: function data() {
            return {
                curr: this.currenttab, //当前标签index
                toggle: this.cantoggle || { edit: false // 标签是否可以切换{edit: boolean}
                } };
        },

        props: ["tablist", "currenttab", "cantoggle"], // 标签列表，当前标签index，标签是否可以切换
        computed: {
            tabWidth: function tabWidth() {
                // 计算标签宽度
                var w = 100 / this.tablist.length + '%';
                return { width: w };
            }
        },
        methods: {
            tabChange: function tabChange(index) {
                // 切换tab标签
                //   console.log(this.toggle.edit);
                if (this.toggle.edit) {
                    return;
                }
                if (index != this.curr) {
                    this.curr = index;
                    this.$emit('tab-change', index);
                    //   console.log('Tab Index: ' + index);
                }
            }
        }
    };
    module.exports = exports["default"];
});

/***/ }),

/***/ "jY3Y":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:"tabs"},[_c('ul',{staticClass:"clearfix"},_vm._l((_vm.tablist),function(tab,index){return _c('li',{style:(_vm.tabWidth)},[_c('span',{class:{active: _vm.curr==index},on:{"click":function($event){_vm.tabChange(index)}}},[_vm._v(_vm._s(tab.title))])])}))])}
var staticRenderFns = []
var esExports = { render: render, staticRenderFns: staticRenderFns }
/* harmony default export */ __webpack_exports__["a"] = (esExports);

/***/ }),

/***/ "pkwM":
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__("FUI0");
if(typeof content === 'string') content = [[module.i, content, '']];
if(content.locals) module.exports = content.locals;
// add the styles to the DOM
var update = __webpack_require__("rjj0")("27467e86", content, true, {});

/***/ }),

/***/ "xCUj":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:"container"},[_c('bread-crumb'),_vm._v(" "),_c('div',{staticClass:"head-title"},[_c('div',{staticClass:"title"},[_c('div',{directives:[{name:"show",rawName:"v-show",value:(!_vm.editing.edit),expression:"!editing.edit"}],staticClass:"titlehead"},[_c('i',{staticClass:"iconfont icon-shelf"}),_vm._v(" "),_c('span',[_vm._v("我的书架")])]),_vm._v(" "),_c('div',{directives:[{name:"show",rawName:"v-show",value:(_vm.editing.edit),expression:"editing.edit"}],staticClass:"titleedit"},[_c('div',{staticClass:"chousebtn"},[_c('label',{staticClass:"radio-btn"},[_c('i',{class:{'iconfont icon-yixuanzhong-yuan': _vm.all}}),_vm._v(" "),_c('input',{attrs:{"type":"checkbox"},domProps:{"value":_vm.all},on:{"change":function($event){_vm.selectAll($event.target.checked)}}})]),_vm._v(" "),_c('b',[_vm._v("全选")])]),_vm._v(" "),_c('div',{staticClass:"chouse hidden-xs"},[_vm._v("\n          已选"),_c('span',[_vm._v(_vm._s(_vm.tempList.length))]),_vm._v("本书\n        ")])]),_vm._v(" "),_c('div',{directives:[{name:"show",rawName:"v-show",value:(!_vm.editing.edit),expression:"!editing.edit"}],staticClass:"bookedit",on:{"click":_vm.edit}},[_c('i',{staticClass:"iconfont icon-edit visible-xs"}),_vm._v(" "),_c('span',[_vm._v("编辑")])]),_vm._v(" "),_c('div',{directives:[{name:"show",rawName:"v-show",value:(_vm.editing.edit),expression:"editing.edit"}],staticClass:"bookdelete"},[_c('div',{staticClass:"delete",on:{"click":_vm.deleteBook}},[_c('i',{staticClass:"iconfont icon-delete"}),_vm._v(" "),_c('span',[_vm._v("删除")])]),_vm._v(" "),_c('div',{staticClass:"cancel",on:{"click":_vm.cancelEdit}},[_c('i',{staticClass:"iconfont icon-cancel"}),_vm._v(" "),_c('span',[_vm._v("取消")])])])]),_vm._v(" "),_c('title-tab',{attrs:{"tablist":_vm.tabs,"currenttab":_vm.curtab,"cantoggle":_vm.editing},on:{"tab-change":_vm.changeTab}}),_vm._v(" "),_c('div',{directives:[{name:"show",rawName:"v-show",value:(_vm.editing.edit&&_vm.isMobile),expression:"editing.edit&&isMobile"}],staticClass:"bookchouse"},[_vm._v("\n      已选"),_c('span',[_vm._v(_vm._s(_vm.tempList.length))]),_vm._v("本书\n    ")])],1),_vm._v(" "),_c('div',{staticClass:"books"},[_c('div',{directives:[{name:"show",rawName:"v-show",value:(_vm.curtab===0),expression:"curtab===0"}],staticClass:"mybooks"},[_c('ul',{staticClass:"clearfix"},[_vm._l((_vm.book.list),function(book){return _c('li',{key:book.id,staticClass:"book"},[_c('router-link',{attrs:{"to":{name: 'eBookDetails',query: {type:'epub',bid:book.id}},"target":"_blank"}},[_c('simple-book',{attrs:{"bookinfo":book}})],1),_vm._v(" "),_c('div',{directives:[{name:"show",rawName:"v-show",value:(_vm.editing.edit),expression:"editing.edit"}],staticClass:"chousebtn"},[_c('label',{staticClass:"radio-btn"},[_c('i',{class:{'iconfont icon-yixuanzhong-yuan': book.chouse}}),_vm._v(" "),_c('input',{attrs:{"type":"checkbox"},domProps:{"value":book.chouse},on:{"change":function($event){_vm.selectItem(book)}}})])])],1)}),_vm._v(" "),_c('none-data',{directives:[{name:"show",rawName:"v-show",value:(!_vm.book.list.length && !_vm.book.loading),expression:"!book.list.length && !book.loading"}],attrs:{"msg":"您还没有收藏图书"}})],2),_vm._v(" "),_c('div',{staticClass:"paging"},[_c('pagination',{ref:"bookpg",attrs:{"total":_vm.book.totalNumb,"current":_vm.book.curr},on:{"page-change":_vm.pageChange}})],1),_vm._v(" "),_c('load-more',{attrs:{"current":_vm.book.curr,"total":_vm.book.totalNumb,"load":_vm.book.loading},on:{"more-data":_vm.loadMore}})],1),_vm._v(" "),_c('div',{directives:[{name:"show",rawName:"v-show",value:(_vm.curtab===1),expression:"curtab===1"}],staticClass:"publication"},[_c('ul',{staticClass:"clearfix"},[_vm._l((_vm.publication.list),function(book){return _c('li',{key:book.id,staticClass:"book"},[_c('router-link',{attrs:{"to":{name: 'eBookDetails',query: {type:'magazine',bid:book.id}},"target":"_blank"}},[_c('simple-book',{attrs:{"bookinfo":book}})],1),_vm._v(" "),_c('div',{directives:[{name:"show",rawName:"v-show",value:(_vm.editing.edit),expression:"editing.edit"}],staticClass:"chousebtn"},[_c('label',{staticClass:"radio-btn"},[_c('i',{class:{'iconfont icon-yixuanzhong-yuan': book.chouse, '': !book.chouse}}),_vm._v(" "),_c('input',{attrs:{"type":"checkbox"},domProps:{"value":book.chouse},on:{"change":function($event){_vm.selectItem(book)}}})])])],1)}),_vm._v(" "),_c('none-data',{directives:[{name:"show",rawName:"v-show",value:(!_vm.publication.list.length && !_vm.publication.loading),expression:"!publication.list.length && !publication.loading"}],attrs:{"msg":"您还没有收藏期刊"}})],2),_vm._v(" "),_c('div',{staticClass:"paging"},[_c('pagination',{ref:"magpg",attrs:{"total":_vm.publication.totalNumb,"current":_vm.publication.curr},on:{"page-change":_vm.pageChange}})],1),_vm._v(" "),_c('load-more',{attrs:{"current":_vm.publication.curr,"total":_vm.publication.totalNumb,"load":_vm.publication.loading},on:{"more-data":_vm.loadMore}})],1)]),_vm._v(" "),_c('div',{directives:[{name:"show",rawName:"v-show",value:(_vm.showDelete),expression:"showDelete"}],staticClass:"delete-container"},[_c('div',{staticClass:"delete-modal"},[_c('div',{staticClass:"modal-content"},[_vm._v("删除时将同时删除所有的书签、阅读记录信息，且无法恢复")]),_vm._v(" "),_c('div',{staticClass:"action-btn"},[_c('button',{staticClass:"btn",on:{"click":_vm.cancelDelete}},[_vm._v("取消")]),_c('button',{staticClass:"btn delete",on:{"click":_vm.makeDelete}},[_vm._v("删除")])])])])],1)}
var staticRenderFns = []
var esExports = { render: render, staticRenderFns: staticRenderFns }
/* harmony default export */ __webpack_exports__["a"] = (esExports);

/***/ }),

/***/ "yd2Y":
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__("+Xlz");
if(typeof content === 'string') content = [[module.i, content, '']];
if(content.locals) module.exports = content.locals;
// add the styles to the DOM
var update = __webpack_require__("rjj0")("31025168", content, true, {});

/***/ }),

/***/ "zkJ1":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
Object.defineProperty(__webpack_exports__, "__esModule", { value: true });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_titleTab_vue__ = __webpack_require__("ZpZI");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_titleTab_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_titleTab_vue__);
/* harmony namespace reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_titleTab_vue__) if(__WEBPACK_IMPORT_KEY__ !== 'default') (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_titleTab_vue__[key]; }) }(__WEBPACK_IMPORT_KEY__));
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_7443f42a_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_titleTab_vue__ = __webpack_require__("jY3Y");
function injectStyle (ssrContext) {
  __webpack_require__("pkwM")
}
var normalizeComponent = __webpack_require__("VU/8")
/* script */


/* template */

/* template functional */
var __vue_template_functional__ = false
/* styles */
var __vue_styles__ = injectStyle
/* scopeId */
var __vue_scopeId__ = "data-v-7443f42a"
/* moduleIdentifier (server only) */
var __vue_module_identifier__ = null
var Component = normalizeComponent(
  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_titleTab_vue___default.a,
  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_7443f42a_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_titleTab_vue__["a" /* default */],
  __vue_template_functional__,
  __vue_styles__,
  __vue_scopeId__,
  __vue_module_identifier__
)

/* harmony default export */ __webpack_exports__["default"] = (Component.exports);


/***/ })

});
//# sourceMappingURL=5.677a13bd9c8f9d155e3a.js.map